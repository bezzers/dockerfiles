FROM ubuntu

MAINTAINER Paul Beswick

# Set up licenses and sources for Java
RUN echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections
RUN echo "deb http://ppa.launchpad.net/webupd8team/java/ubuntu trusty main" >> /etc/apt/sources.list.d/webupd8team-java.list
RUN echo "deb-src http://ppa.launchpad.net/webupd8team/java/ubuntu trusty main" >> /etc/apt/sources.list.d/webupd8team-java.list

# Install the desktop and other key utilities
RUN apt-get -o Acquire::ForceIPv4=true update && \
    DEBIAN_FRONTEND=noninteractive apt-get -o Acquire::ForceIPv4=true install -y \
                       lxde-core \
                       lxterminal \
                       tightvncserver \
                       wget \
                       software-properties-common \
                       firefox

# Install Java, accept the license and set the environment variables
RUN apt-get -o Acquire::ForceIPv4=true install -y --force-yes oracle-java8-installer
RUN apt-get -o Acquire::ForceIPv4=true install -y oracle-java8-set-default
                       
# Download and install WebStorm                       
#RUN wget -4 -O - download.jetbrains.com/webstorm/WebStorm-10.0.4.tar.gz | tar zxf - && \
#    cd WebStorm*/bin && \
#    bash webstorm.sh
    
# Install docker
#wget -4 -qO- https://get.docker.com/ | sh

# Clean up temporary files    
RUN rm -rf /var/lib/apt/lists/* && \
    rm -rf /tmp/*

WORKDIR /data
CMD ["bash"]

# Expose the port that vnc will connect to
EXPOSE 5901
